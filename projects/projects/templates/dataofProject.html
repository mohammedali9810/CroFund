{% extends "layout.html" %}
{% load commentTemp %}
{% block content %}


    <div class="app-content pt-3 p-md-3 p-lg-4">
        <div class="container-xl">

            <h1 class="app-page-title">My Project</h1>
            {% for i  in messages %}
            <p style="color:blue">{{i}}</p>
        {% endfor %}
            <div class="row gy-4">
                <div class="col-12 col-lg-10">
                    <div class="app-card app-card-account shadow-sm d-flex flex-column align-items-start">
                        <div class="app-card-header p-3 border-bottom-0">
                            <div class="row align-items-center gx-3">
                                <div class="col-auto">
                                    <div class="app-icon-holder">
                                        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-person"
                                             fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                            <path fill-rule="evenodd"
                                                  d="M10 5a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm6 5c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"/>
                                        </svg>
                                    </div><!--//icon-holder-->

                                </div><!--//col-->
                                <div class="col-auto">
                                    <h4 class="app-card-title">{{ Projectdata.title }}</h4>
                                </div><!--//col-->
                            </div><!--//row-->
                        </div><!--//app-card-header-->

                        <div class="app-card-body px-4 w-100">

                            <div class="item border-bottom py-3">
                                <div class="row justify-content-between align-items-center">
                                    <div class="col-auto">
                                        <div class="item-label"><strong>Title</strong></div>
                                        <div class="item-data">{{ Projectdata.title }}</div>
                                    </div><!--//col-->
                                    <div class="col text-end">
                                        <a class="btn-sm app-btn-secondary" href="#">Change</a>
                                    </div><!--//col-->
                                </div><!--//row-->
                            </div><!--//item-->
                            <div class="item border-bottom py-3">
                                <div class="row justify-content-between align-items-center">
                                    <div class="col-auto">
                                        <div class="item-label"><strong>Target</strong></div>
                                        <div class="item-data">{{ Projectdata.total_target }}</div>
                                    </div><!--//col-->
                                    <div class="col text-end">
                                        <a class="btn-sm app-btn-secondary" href="#">Change</a>
                                    </div><!--//col-->
                                </div><!--//row-->
                            </div><!--//item-->
                            <div class="item border-bottom py-3">
                                <div class="row justify-content-between align-items-center">
                                    <div class="col-auto">
                                        <div class="item-label"><strong>Total Donation</strong></div>
                                        <div class="item-data">
                                            {{ total_donation }}LE
                                        </div>
                                    </div><!--//col-->
                                    <div class="col text-end">
                                        <form action="{% url 'donate' Projectdata.id %}" method="post">
                                            {% csrf_token %}
                                            {{ donate_form }}
                                            <input type="submit" value="Donate">
                                        </form>
                                    </div><!--//col-->
                                </div><!--//row-->
                            </div><!--//item-->
                            <div class="item border-bottom py-3">
                                <div class="row justify-content-between align-items-center">
                                    <div class="col-auto">
                                        <div class="item-label"><strong>Details</strong></div>
                                        <div class="item-data">
                                            {{ Projectdata.details }}
                                        </div>
                                    </div><!--//col-->
                                    <div class="col text-end">
                                        <a class="btn-sm app-btn-secondary" href="#">Change</a>
                                    </div><!--//col-->
                                </div><!--//row-->
                            </div><!--//item-->

                            <div class="item border-bottom py-3">
                                <div class="row justify-content-between align-items-center">
                                    <div class="col-auto">
                                        <div class="item-label"><strong>Start Time</strong></div>
                                        <div class="item-data">
                                            {{ Projectdata.start_time }}
                                        </div>
                                    </div><!--//col-->
                                    <div class="col text-end">
                                        <a class="btn-sm app-btn-secondary" href="#">Change</a>
                                    </div><!--//col-->
                                </div><!--//row-->
                            </div><!--//item-->

                            <div class="item border-bottom py-3">
                                <div class="row justify-content-between align-items-center">
                                    <div class="col-auto">
                                        <div class="item-label"><strong>End Time</strong></div>
                                        <div class="item-data">
                                            {{ Projectdata.end_time }}
                                        </div>
                                    </div><!--//col-->
                                    <div class="col text-end">
                                        <a class="btn-sm app-btn-secondary" href="#">Change</a>
                                    </div><!--//col-->
                                </div><!--//row-->
                            </div><!--//item-->

                            <div class="item border-bottom py-3">
                                <div class="row justify-content-between align-items-center">
                                    <div class="col-auto">
                                        <div class="item-label"><strong>Tags</strong></div>
                                        <div class="item-data">
                                            {% for t  in tags %}
                                                <span>{{ t.tags }}</span>,
                                            {% endfor %}
                                        </div>
                                    </div><!--//col-->
                                    <div class="col text-end">
                                        <a class="btn-sm app-btn-secondary" href="#">Change</a>
                                    </div><!--//col-->
                                </div><!--//row-->
                            </div><!--//item-->

                            <div class="item border-bottom py-3">
                                <div class="row justify-content-between align-items-center">
                                    <div class="col-auto">
                                        <div class="item-label"><strong>Rate</strong></div>
                                        <div class="item-data">
                                            {{ rate }}
                                        </div>
                                    </div><!--//col-->
                                    <div class="col text-end">
                                        {#                                        <a class="btn-sm app-btn-secondary" href="#">#}
                                        <form action="{% url 'rate' Projectdata.id %}" method="post">
                                            {% csrf_token %}
                                            {{ rate_form }}
                                            <input type="submit" value="Rate" class="btn-sm app-btn-secondary">
                                        </form>
                                        {#                                        </a>#}
                                    </div><!--//col-->
                                </div><!--//row-->
                            </div><!--//item-->

                            <div class="item border-bottom py-3">
                                <div class="item-label"><strong>Comment</strong></div>
                                {% for i  in comments %}
                                    <div class="row justify-content-between align-items-center">

                                        <div class="col-auto">
                                            <div class="item-data">

                                                <div class="">
                                                    <div class="item-label text-primary">{{ i.user_id.username }}</div>
                                                    <span class="item-data ">{{ i.comment }}</span>
                                                </div>

                                            </div>

                                        </div><!--//col-->

                                        <div class="col text-end">
                                            {% if i.user_id.id == currentUser %}
                                                <a href="{% url 'deleteComment' i.id Projectdata.id %}"
                                                   class="btn-sm app-btn-secondary">Delete</a>
                                            {% elif i.id|filter_comment_report:currentUser %}
                                                <a href="{% url 'reportComment' i.id Projectdata.id %}"
                                                   class="btn-sm app-btn-secondary">Report</a>
                                            {% endif %}

                                        </div><!--//col-->


                                    </div><!--//row-->
                                {% endfor %}
                            </div><!--//item-->

                            <form action="{% url 'comment' Projectdata.id %}" method="post">
                            <div class="item border-bottom py-3">
                                <div class="row justify-content-between align-items-center">
                                    <div class="col-auto">
                                        <div class="item-label"><strong>Add comment</strong></div>
                                        <div class="item-data">
                                            <div class="write_comment">
                                                <form action="{% url 'comment' Projectdata.id %}" method="post">
                                                    {% csrf_token %}
                                                    {{ form.as_p }}
                                                    
                                                
                                            </div>
                                        </div>
                                    </div><!--//col-->
                               
                                    <div class="col text-end">
                                        <input class="btn-sm app-btn-secondary" type="submit" value="Comment">
                                    </div><!--//col-->
                                </div><!--//row-->
                            </form>

                            </div><!--//item-->

                          


                        </div><!--//app-card-body-->

                       

                    </div><!--//app-card-->
                </div><!--//col-->

            </div><!--//row-->

         
        </div><!--//container-fluid-->


        <div class="container-xl mt-5">

        <h1 class="app-page-title">Project Images</h1>

        <div class="row g-4">

            {% for i  in image %}
                <div class="col-6 col-md-4 col-xl-3 col-xxl-2">
                    <div class="app-card app-card-doc shadow-sm  h-100">
                        <div class="app-card-thumb-holder p-3">
                            <div class="app-card-thumb">
                                
                                <img class="thumb-image" src="{{ i.image.url}}" alt="">
                            </div>
                            <a class="app-card-link-mask" href="#file-link"></a>
                        </div>
                        <div class="app-card-body p-3 has-card-actions">
    
                            <h4 class="app-doc-title truncate mb-0"><a href="#file-link"><span class="text-secondary">{{ forloop.counter}} - </span>{{ i }}</a>
                            </h4>
                           
    
                        
    
                        </div><!--//app-card-body-->
    
                    </div><!--//app-card-->
                </div><!--//col-->
    
            {% endfor %}
    
        </div><!--//row-->
    
   

    </div><!--//container-fluid-->

    <div class="container-xl mt-5">
        <div class="similar">
            <h6>Simillar Projects:</h6>
            <ul>
                {% for i in similar_projects %}
                    <li><a href=" {% url 'detail' i.id %} ">{{ i.title }}</a></li>
                {% endfor %}
            </ul>
        </div>
        <div class="cancel">
            {% if authority == "report" %}
                <a href="{% url 'report' Projectdata.id %}">Report</a>
            {% elif authority == "cancel" %}
                <a href="{% url 'delete' Projectdata.id %}">Cancel Project</a>
            {% endif %}
        </div>
       
        

    </div>
    </div><!--//app-content-->


   



{% endblock %}
